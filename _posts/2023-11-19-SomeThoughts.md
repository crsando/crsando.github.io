---
layout: post
title: 最近的一点想法
tags: thinking,life
---

# 座谈

上周回总部培训了两天，第一天上午就是和太上皇的座谈。

讲的不好。不过听太上皇的意思，感觉还是希望往在区域的数据方面多做点事情。

一直有个想法， 这几天的尝试实施：区域很多销售管理工作，核心是“微信群”，比如销售去了一个地方，水印相机拍一张
放到群里“打卡”。销售卖了一笔件，发到群里，放一个交易额。

从微信群里手工统计当天的业绩是一件比较繁琐的事情，需要人力。

如果可以用微信机器人的话，是不是就简单了呢。

两个关键：
    1. 微信机器人怎么做？找到了wechaty这个方案。
    2. 对图片怎么识别？未来可以做更复杂的分类模型，现在先跑个ocr

# wechaty
我实在服了这个玩意了，文档复杂的一塌糊涂，一个Puppet看了半天。年初就想搞微信机器人，就是看wechaty看了太繁琐了。最后换telegram的机器人真的轻松简单。

好在这次把wechaty看懂了。踩了一堆坑，主要也是因为自己对nodejs体系没那么熟悉。

好在最终代码还是很简单的。

# easyocr & runpod.io
OCR的方案搜索了一下，选了easyocr这个，主要是看api比较简单，本地试了一下非常轻松。没有gpu的情况下，我的Surface Pro 9用cpu跑大概20-30s一张图片，这个速度太慢了肯定没法接受的。

纠结了一会（自己再买台笔记本跑？），决定拿起之前用过runpod.io这个gpu云平台。之前是跑了一个ai作图，提供了serverless的方案。

以前也是吐槽这个平台的文档有点弱。这次看有所更新，研究了一下做serverless不麻烦，自己写docker image，用import runpod按照模板写不难。

docker因为不熟悉花了一点时间。但最麻烦还是
    1. WSL2下安装docker踩了点坑，比如一开始systemd死活搞不定。哎。其实上次折腾过一次后来都忘记了。
    2. docker下pip太慢了。。。这个折腾了我两天。

最终选择手动下载whl文件代替pip下载。。。服了自己。

最终的docker image放在mdqiu/easyocr-runpod-api里头了。做的过程比较恶心，以后有机会重新来调整。

# node fetch
我真的服了，nodejs里头发一个post request这么多种方案。

结果测试过程中，一会成功一会失败，报错了ETIMEDOUT，搜了半天搞不明白啥问题。

最后想通了：喵的是本机性能不足，跑起来超时了啊。。。我的代码放在aliyun的服务器上跑，性能太差了。拿回本机都稳定post成功了。

这也能是坑，万万没想到。

# 股票方面

小账户终于做正了，不容易，取出来了一点钱当零花钱。

大账户还差一点，期货账户比较惨，继续加油。


