---
layout: post
title: 专题讲义 - 数列求和问题
tags: math,education
category: math
---

# Background

# Table of Contents

1. 数列求和的基础
    * 
2. 公式化求和（具体数学）
    * 多项式求和
    * 分数求和
    * 幂次求和
3. 递推型数列的通项公式与求和问题
    * 公式
    * 不动点法
    * 与常见数列的比较
4. 延申：中值定理的应用
    * 单调性和面积的思路
5. 例题



# 例题

### 1

*上海交通大雪2023强基计划校测笔试 - 第二题*

已知数列 $a_n$ 满足 $a_1 = 1$, $a_{n+1} = \frac{a_n}{1 + \sqrt{a_n}}$，记数列$a_n$的前$n$项和为
$S_n$，则（）

* A. $ 1/2 < S_100 < 3$
* B. $ 3 < S_100 < 4$
* C. $ 4 < S_100 < 9/2$
* D. $ 9/2 < S_100 < 5$

***Solution***

> 这种题目，首先看看通项公式能否简化甚至算出来，如果不行，考虑怎么缩放

> 这种很明显$a_n$比较小，而且这种题目得形式，很自然想到取**倒数**

首先，整理通项公式，得

$$
    \frac{1}{a_{n+1}} = \frac{1}{a_n} + \frac{1}{\sqrt{a_n}}
$$

记 $b_n = \frac{1}{\sqrt{a_n}}$，则上式简化为

$$
    b_{n+1}^2 = b_n^2 + b_n = (b_n + \frac{1}{2})^2 - \frac{1}{4}
$$

> 这里，其实大概能想到 $b_n$应该和$\frac{n}{2}$这个样子相当，
> 进一步考虑$b_1=1, b_2 = \sqrt{2}$，所以我们猜想$b_n$大致和$\frac{n+1}{2}$相当

由归纳法，不难验证 $b_n \leq \frac{n+1}{2}$，事实上，若对$n$以上不等式成立，则对$n+1$，有

$$
    b_{n+1}^2 < (\frac{n+1}{2} + \frac{1}{2})^2 \implies b_{n+1} < \frac{n+2}{2}
$$

因此

$$
    a_n = \frac{1}{b_n^2} \geq \frac{4}{(n+1)^2}
$$

将上式带入原通项公式，可知

$$
    a_{n+1} =  \frac{a_n}{1 + \sqrt{a_n}} \leq \frac{a_n}{1 + \frac{n+1}{2}}
        = \frac{n+1}{n+3} \cdot a_n
$$

将上式递推展开，得

$$
    a_{n+1} \leq \frac{(n+1) \cdot n \cdots 2 }{(n+3) \cdot (n+2) \cdots 4} \cdot a_1
        = \frac{6}{(n+3)(n+2)} = 6 \cdot ( \frac{1}{n+2} - \frac{1}{n+3} )
$$

综上，可知

所以，有

$$
    S_m \leq a_1 + a_2 + 6 \cdot ( \frac{1}{4} - \frac{1}{m+2})
        < 1 + \frac{1}{2} + \frac{6}{4} = 3
$$

另一方面，由 $a_n \geq \frac{4}{(n+1)^2}$, 易得

$$
    a_n \geq 4 \cdot (\frac{1}{n+1} - \frac{1}{n+2})
$$


因此显然选A。至于$S_{100} > 1/2$是显然的（$a_1 = 1$）

> 顺便一提，拿计算机跑一下数值计算的结果为 2.7731

### 2

*上海交通大雪2023强基计划校测笔试 - 第4题*

几位大学生相应国家创业号召，开发了一款应用软件，为了激发大家学习数学的兴趣，他们推出了
“解数学题获取软件激活码”的活动，这款软件的激活码为下面数学问题的答案：已知数列

$$
    1, 1, 2, 1, 2, 4, \cdots 
$$

其中第一项为$2^0$，接下来为$2^0, 2^1$，接下来为$2^0, 2^1, 2^2$，依此类推。

求满足如下条件的最小整数$N > 100$，使得该数列前$N$项和为$2$的整数幂。那么该软件的激活码为（）

***Solution***

> 这种题目，没啥难度，关键就是学会表达清楚，然后计算清楚，就不容易算错，就可以了

按原题条件将数列的项目分组，规则如下：第$k$组的数为$2^0, \cdot 2^k$，则第$k$组恰好有$k$个数，
且第$k$组各数和为$2^k - 1$

考虑任意一对整数$m,u$，由条件可知，若我们取前$m$组和第$m+1$组的前$u$个数（注意到在这种取法下，必然有$u \leq m$），则恰好取得

$$
    C(m,u) = \sum_k^m k + u = \frac{m(m+1)}{2} + u
$$

个数。且这$n$个数得和为

$$
    S(m,u) = \sum_k^m ( 2^k - 1) + \sum_{i = 1}^{u} 2^i
        = 2^m + 2^u - (m+3)
$$

首先注意到对于任意的这样的组合$(m_1,u_1)$和$(m_2,u_2)$，若$m_1 > m_2$，则必然有$C(m_1,u_1) > C(m_1,u_2)$，因此我们只要找尽可能小的$m$即可。

对于$C(m,u) = N>100$得情形，由于显然有$u \leq m+1$，因此

$$
    100 < \frac{m(m+1)}{2} + (m+1) \implies 200 < (m+1)(m+2) \implies m > 13
$$

进一步的，此时，显然$2^m > 2(m+3)$。

由题意，若取前$N>100$个数得和为$2$得整数幂，即存在一个$v$，满足

$$
    2^m + 2^u - (m+3) = 2^v \implies 2^m + 2^u = 2^v + (m+3)
$$

若$v > m$，则上式右边显然$2^v + (m+3) > 2^(m+1) >= 2^m + 2^u$，矛盾；而若$v < m$，则上式子左边
$2^m + 2^u > 2^v + 2^{m-1} > 2^v + (m+3)$，因此唯一的可能性是$v = m$，此时简化为$2^u = m +3$

由于$m > 13$，因此满足$2^u = m +3$的最小可能（严谨的说，这里的最小，指使得$m$最小）的组合为$(m,u) = (29,5)$，此时

$$
    N = C(29,5) = 440
$$

即原题所求。

### 3

*清华大学2023强基计划校测笔试 - 第6题*

数列$a_n$ 满足 $a_1 = \frac{3}{2}$， $a_{n+1} = x^{a_n}$，求使得该数列$a_n$有极限的$x$的最大值。

> 很显然去考虑不动点

取 $u$ 为方程 $a_1 = u^{a_1}$ 的根，即$u = \frac{\ln{a_1}}{a_1}$

考虑函数

$$
    f_l(x) = u^{l} - l
$$

分别考虑对$l,u$的导数，可知这个函数对$x$单增，对$l$也单增，因此，对于$x \leq u$且$l \leq a_1$，成立

$$
    x^l - l = f_l(x) \leq f_l(u) \leq f_{a_1}(u) = 0
$$

由上式子，经归纳法易于验证，若$x \leq u$，则$a_2 = x^{a_1} < u^{a_1} = u$，进而对任意$n$都有
$a_{n+1} = x^{a_n} \leq x^{a_1} \leq u_{a_1} < a_1$，进而由前述关于$f_l(x)$的分析可知 $a_{n+1} = x^{a_n} \leq a_n$

而显然所有的$a_n > 0$，因此$a_n$有下限且单调递减，必然有极限。特别的，当$x = u$时，显然$a_n = u$对一切$n$成立，则极限显然为$u$。

反之，对于$x > u$的情形，同理可归纳证明$a_{n+1} > a_n$单调递增。

补充定义$\frac{x}{u} = 1 + \epsilon$（由于$x >u$, $\epsilon > 0$）

考虑$a_2$，注意到由于$a_1 > 1$，有：

$$
    a_2 = (\frac{x}{u})^{a_1} \cdot u^{a_1} = (1+\epsilon)^{a_1} a_1 \geq (1+\epsilon) a_1
$$

由归纳法易于验证 $a_n \geq (1+\epsilon)^{n-1} a_1$，事实上，若对$n$上成立，对$n+1$的情形：

$$
    a_{n+1} = x^{a_n} = (1+\epsilon)^{a_n} \cdot u^{a_n} \geq (1+\epsilon) \cdot a_n
        \geq (1+\epsilon)^n a_1
$$

因此$a_{n+1} \geq (1+\epsilon)^n a_1$，显然$a_n$无极限。原题得解。

### 4

*北京大学2024年强基计划*

求 

$$
    \sum_{i=1}^{2024} \lfloor \frac{19^i}{20} \rfloor 
$$ 

模 $7$ 的余数

> 就题就是考验求和运算的基本功，仔细+细心

考察求和的单项

$$
\begin{aligned}
    a_m &= \lfloor \frac{19^m}{20} \rfloor  \\
        &= \lfloor \frac{(20-1)^m}{20} \rfloor \\
        &= \lfloor \frac{\sum_{k=0}^m \binom{m}{k}(-1)^{m-k}20^k }{20} \rfloor \\
        &= \sum_{k=1}^m \binom{m}{k}(-1)^{m-k}20^{k-1} + \lfloor \frac{(-1)^m}{20} \rfloor
\end{aligned}
$$

两边模$7$，得

$$
\begin{aligned}
    a_m &\equiv \sum_{k=1}^m \binom{m}{k} (-1)^{m-1} + \lfloor \frac{(-1)^m}{20} \rfloor \\
        &\equiv (-1)^{m-1}(2^m - 1) + \lfloor \frac{(-1)^m}{20} \rfloor
\end{aligned}
$$

上式右边最后一项在$m$为偶数时为$0$，在$m$为奇数时为$-1$，所以实际上就是

$$
\begin{aligned}
    S &= \sum_{m=1}^{2024} a_m \\
        &\equiv \sum_{m=1}^{2024} (-1)^{m-1}(2^m -1) 
            + \sum_{m=1}^{2024} \lfloor \frac{(-1)^m}{20} \rfloor \\
        &\equiv \sum_{m=1}^{2024} (-1)^{m-1}(2^m -1) - 1012 \\ 
        &\equiv \sum_{m=1}^{2024} (-1)^{m-1}(2^m -1) - 1012 \\
        &\equiv \sum_{m=1}^{2024} (-2)^{m-1}\cdot 2 + \sum_{m=1}^{2024} (-1)^m - 1012 \\
        &\equiv 2 \sum_{k=1}^{2024} (-2)^{k-1} - 4\\
\end{aligned}
$$

注意到 $(-2)^{m} \equiv - (-2)^{m+3} \equiv (-2)^{m+6}$，因此

$$
\begin{aligned}
    S &\equiv 2 \sum_{k=1}^{2024} (-2)^{k-1} - 4 \\
        &\equiv 2 \sum_{k=1}^{2} (-2)^{k-1}  + 2 \sum_{k=3}^{2024} (-2)^{k-1} - 4  \\
        &\equiv -2  + 2 \sum_{k=1}^{2022} (-2)^{k+1} - 4  \\
        &\equiv -6  + 2 \sum_{u=0}^{336} \sum_{v = 0}^{5} (-2)^{6u+v+2}  \\
        &\equiv -6 \equiv 1 \quad (\mod 7)
\end{aligned}
$$

### 5

*清华大学2024年强基计划*

已知 $a_1 = 1$， $a_{n+1} = a_n + \frac{1}{a_n^2}$， 下列选项正确的是：

* A: $\lim \frac{a_n}{n^{1/3}} = 3^{1/3}$
* B: $\lfloor a_{400} \rfloor = 20$
* C: $\lim \frac{a_n}{n^{1/2}} = 2^{1/2}$
* D: $\lfloor a_{900} \rfloor = 30$

***Solution*** 

> 这题的关键是对数列的大小要有一点感觉，这题很容易发现，若$a_n$的量级大概是$\sqrt{n}$，则太大了，
> 因此偏向于去猜 $a_n$应该是$n^{1/3}$这个量级，因此猜选项A正确，因此猜大概$a_n$应该接近$(3n)^{1/3}$
> 这个数量。再结合数列前两项，得到猜测

> 另一方面，这题利用了一个知识点，就是对于 $\sum \frac{1}{n}$怎么缩放，要利用 $\frac{1}{n} < \ln n - \ln (n-1)$

由条件，显然$a_n$单调递增。

注意到当$n \geqslant 2$时

$$
    a_{n+1}^3 = (a_n + \frac{1}{a_n^2})^3 = a_n^3 + 3 + \frac{3}{a_n^3} + \frac{1}{a_n^6}
$$

上式右边$ > a_n^3 + 3 $， 因此不难归纳得证$a_n^3 > 3n + 2$

再带回，可知

$$
\begin{aligned}
    a_{n+1}^3 &=  a_n^3 + 3 + \frac{3}{a_n^3} + \frac{1}{a_n^6}  \\
        &< a_n^3 + 3 + \frac{3}{3n+2} + \frac{1}{(3n+2)^2} \\
        &< a_n^3 + 3 + \frac{1}{n} + \frac{1}{9n(n-1)} \\
        &< a_n^3 + 3 + (\ln n - \ln(n-1)) + \frac{1}{9}(\frac{1}{n-1} - \frac{1}{n}) \\
\end{aligned}
$$

由此可得

$$
    a_n^3 < 3n + 2 + \ln(n-1) + \frac{1}{9}
$$

由此易于验证只有AD选项正确