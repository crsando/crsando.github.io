---
layout: post
title: Puzzle - Breaking the Grid
tags: math,education,puzzle
category: math
---

*From The Book: Mathematical Puzzles, Page 45*

# Breaking the Grid

Suppose that you are given an $n \times n$ grid of unit-length rods, jointed
at their ends. You may brace some subset $S$ of the small squares with
diagonal segments (of length 2).

Which choices of S suffice to make the grid rigid in the plane?

假设由一堆单位长度的木棍，四根木棍组成一个正方形，所有的这些木棍刚好在桌子上组成一个$n \times n$的方格表。现在，桌子上的方格表是“横平竖直”的，即每个格子都是一个完美的正方形。

很显然：一个四根木棍组成的正方形是不稳定的：你可以稍微拨动一下，让这个正方形变成一个平行四边形。

聪明的你知道三角形是稳定的，换句话说：如果在某个四个木棍组成的正方形中，用一个$\sqrt{2}$长度的木棍连接一个对角线，那么这个正方形就“稳定”而不能被变形了。（称一个这样的木棍为一个“支撑”）

请问：如果我们能自由的选取在某些地方添加支撑，那么至少要添加多少个根支撑，才能使得整个$n \times n$的方格表变成稳定的？（换句话说，我们不能够让其中的正方形发生形变）

***Solution***

这题原解答写的非常直接（直接上来就上图论），这里我详细写一下我的思考过程。

这题的关键是想明白：什么情况下这个图是可以移动的？

![](https://crsando.github.io/images/2025-06-08/breaking.the.grid.001.png)

为了方便期间：我们称一个对角线的木棍称为一个“支撑”，我们默认一开始正方形都是直的，称变形过程为“压缩”。

先看$n = 1$的情况，此时显然如果我们一个支撑都不加，这一个正方形（四根木棍）显然是一个“压扁”的。所以$n=1$情况下必然也是一个支撑。

这种情形其实给我们一个提示：就是一个正方形由于四边是连接在一起的，所以要么就一个正方形一起压缩。

再看$n =2$，很自然想到，如果一行里面一个支撑都没有，那这一行可以压扁。所以每行必须至少一个支撑，每列也至少一个支撑，所以至少两个支撑。试一下放在对角线上，好像确实整个图形都动不了。

但是我们还是的把**动不了**这件事情讲明白。想一想：怎么算动？放在现实中，肯定得施加一个力去让物体移动对吧？然后你再一想，如果没有固定点，那么整个图形平移肯定是没有意义的，所以你就想成：有至少一个固定点，然后在某个地方施加一个力，整个图形发生变化。然后你再想：这个力，是施加在一个连接点上（拽一下）还是在一条边上，其实是没区别。

所以最终简化成这么一件事情：在整个结构中，找到一条木棍，一手按住这条木棍的一段，另一只手把木棍往某个方向拨动一个角度，此时图形的其他部分能够跟着联动，那么就说明这个图形“动起来了”

好的，想明白这点，我们再进一步想$n = 3$

但是$n = 3$的情形一下子就复杂起来了，假设我们仿照$n =2$，保证每行每列都有一个支撑，那么自然仿照$n = 2$我们放在对角线上，那么此时图形仍然是可以压扁的。

![](https://crsando.github.io/images/2025-06-08/breaking.the.grid.002.png)

如果我们回到$n = 2$的情形去思考，就自然的去想到压缩这件事情可以想的更细化一点，如果我们固定一条边，然后与之相连的边，要么向左边旋转（逆时针），要么向右边旋转。

更进一步的：一个矩形整体，要么向顺时针方向去压缩（固定一条边不变，另外两条边都向顺时针方向去旋转，带动最后一条边跟着旋转），或者向逆时针方向旋转。而且，同一行的矩形如果变形，必然也是向相同的方向去压缩（旋转）。

那么在图里这种情形，其实就是最上面一行和最右边一列，同时向顺时针方向，这个过程中仅有一个方格是固定的（右上角的方格），但是即便他是被支撑的，他仍然可以跟着这一行一列旋转。

换句话说：如果我们发现：有些行和列是孤立的，即这些行和列可以一起压缩，而让所有不在这些行和列的格子保持固定，那么自然图形是可以移动的。这个充分性比较容易直观的去说明。

但是：必要性呢？为此，我们还是的仔细研究行列之间的连接关系。

我们现在明确的区分一下：压缩和旋转。如果一个格子保持不变，但是相对某一个固定的点发生了旋转，就称这个格子为旋转。如果这个格子不再保持正方形，那么就是压缩。有支撑的格子，只能旋转，不能压缩。

引理：若一个格子发生了旋转，必然带动相邻的格子压缩或者旋转。

注意：旋转同时带动行和列，压缩只发生在行上或者列上。

这提醒我们一件事情：所谓支撑，并不是绝对让这行不能压缩，而是强迫这行和这列只能向同一个方向压缩。这件事情需要讲的更仔细一点，因为其实，同一行和同一列的格子不一定是往同一个方向移动（最简单的情况，如果是一个支撑都没有的，让第一行和最后一行分别往顺时针和逆时针压缩，那么中间列的格子就有两种不同的方向）。

所以回到前面说的这个逻辑：***在整个结构中，找到一条木棍，一手按住这条木棍的一段，另一只手把木棍往某个方向拨动一个角度，此时图形的其他部分能够跟着联动，那么就说明这个图形“动起来了”。***

我们沿着这一条木棍出发：假设我们把木棍往顺时针方向推，那么包含这根木棍的格子都必须顺时针方形压缩（含旋转）。更仔细一点来说：

初始状态下，必然至少带动了某一行或者某一列发生压缩或者旋转。

由于初始状态下，至少是操作了一行或者一列，所以我们可以由此出发。

这个想法自然而然的引出了图论：把行标记为$r_1, r_2, \cdots, r_n$，列标记为$c_1, c_2, \cdots, r_n$，如果有一个支撑位于第$i$行第$j$列，就构造一个数对$(r_i, c_j)$，或者说连接一条线$r_i \leftrightarrow c_j$，记$V = \{r_k, c_k\}$为这些行列组成的集合，$G=(V,E)$是这些连线构成图

前面的充分性其实就是说：假设有一组$V' \subset V$，使得$V'$和$V' \backslash V$两组点之间没有连线，那么$V'$称为一组孤立的行列，那么$V'$显然是可以被压缩的。

现在说明必要性：假设这个图不存在孤立的部分，即整个$G(V,E)$是联通的，由于初始状态下的第一步，我们迫使某一行或者某一列发生了旋转或压缩，不妨设为$e_1$，由于至少存在一条通路$e_1 \rightarrow e_2 \rightarrow \cdots e_{2n}$遍历所有的行和列，那么$e_1$带动$e_2$，$e_2$带动$e_3$，依次类推，则所有的行和列都发生了压缩或者旋转。

但是，我们总是可以不妨假设至少一个格子是保持不变的，构成了矛盾。

总结一下：为了让由木棍组成的$n \times n$矩阵图不能变形，我们需要增加一些支撑，这些支撑作为edge，使得由所有行列组成的vertex的无向图变成连同的。

那么问题简化为：一个$2n$个点的连通图，至少需要多少条变呢？答案显然是$2n -1$条边。

![](https://crsando.github.io/images/2025-06-08/breaking.the.grid.003.png)

$n = 3$情形的构造如上。